{% extends "base.html" %}

{% block lab %}Лабораторная работа 8{% endblock %}

{% block main %}
    <h1>Мои статьи</h1>

    <form action="/lab8/articles" method="get" style="margin-bottom: 20px;">
        <input type="text" name="query" placeholder="Поиск по моим статьям..." 
               value="{{ query if query else '' }}" style="padding: 8px; width: 300px;">
        <button type="submit" style="padding: 8px 15px;">Найти</button>
        {% if query %}
            <a href="/lab8/articles" style="margin-left: 10px;">Сбросить поиск</a>
        {% endif %}
    </form>

    {% if query %}
        <p style="margin-bottom: 15px;">
            Результаты поиска по запросу: "<strong>{{ query }}</strong>"
        </p>
    {% endif %}

    {% if not articles %}
        <p>{% if query %}Ничего не найдено{% else %}У вас пока нет статей. <a href="/lab8/create">Создайте первую статью!</a>{% endif %}</p>
    {% else %}
        {% for article in articles %}
                <div style="border: 1px solid #c2b5b5; padding: 15px; margin-bottom: 15px; border-radius: 5px; {% if article.is_favorite %}background-color: #fffacd;{% endif %}">
                {% if article['is_favorite'] %}
                    <span style="color: rgb(209, 167, 115); font-weight: bold;">★ </span>
                {% endif %}
                <h2>{{ article.title }}</h2>  
                <blockquote>{{ article.article_text }}</blockquote> 
                <div>
                    {% if article.is_public %}
                        <span style="color: rgb(142, 216, 142); margin-right: 10px;">Публичная</span>
                    {% else %}
                        <span style="color: rgb(143, 105, 105); margin-right: 10px;">Приватная</span>
                    {% endif %}
                    <a href="/lab5/edit/{{ article['id'] }}" style="color: rgb(163, 216, 241); margin-right: 10px;">Редактировать</a>
                    <a href="/lab5/delete/{{ article['id'] }}" style="color: rgb(202, 103, 103);" 
                       onclick="return confirm('Вы уверены, что хотите удалить эту статью?')">Удалить</a>
                </div>
            </div>
        {% endfor %}
    {% endif %}
    
    <div style="margin-top: 20px;">
        
        <a href="/lab8/create">Создать новую статью</a> | 
        <a href="/lab/public">Публичные статьи</a> | 
        <a href="/lab8/">На главную</a>
    </div>

    
{% endblock %}